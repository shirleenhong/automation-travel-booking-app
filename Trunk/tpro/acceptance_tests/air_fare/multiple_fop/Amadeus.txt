*** Settings ***
Force Tags
Resource          ../air_fare_verification.txt

*** Test Cases ***
[NB HK] Verify That Accounting Remarks For Multiple FOP - Cash, VI (From Portrait), TMP
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    hk
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN HK 3    BEAR    PABLO
    Click New Booking
    Click Panel    Client Info
    Select Form Of Payment    Invoice
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Update PNR for EN or GB
    Book Flight X Months From Now    SINHKG/ASQ    SS1Y1    FXP/S2    4
    Book Flight X Months From Now    HKGCKG/AKA    SS1Y1    FXP/S3    4    10
    Book Flight X Months From Now    CKGHKG/AHX    SS1Y1    FXP/S4    4    25
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Set Transaction Fee On Air Fare Panel    0
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Invoice
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Verify Fuel Surcharge Value In Air Fare    Fare 1    30
    Set Fuel Surcharge Field    0
    Populate Fare Quote Tabs with Default Values
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Click Fare Tab    Fare 2
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TEST CARD/VI************0087/D0823/CVV***
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/VI4900000000000087/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Set Fuel Surcharge Value To Empty
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Verify Manually Created Credit Card Invalid Number    Fare 3
    Verify Manually Created Credit Card Expiration Date    Fare 3
    Verify Selected Credit Card Expiration Date    Fare 3    KMBSAMPLE/VI***********2111/D0808
    Verify Manually Created Credit Card Near Expiration Date    Fare 3
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    DC3644031458720369/D${near_expiration_year}
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus    ${current_pnr}    refresh_needed=True
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    Invoice    HK
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    TEST CARD/VI4900000000000087/D0823/CVV***    HK    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S4    04    DC3644031458720369/D${near_expiration_year}    HK    Airline
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 1    S2    02    Invoice
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 2    S3    03    TEST CARD/VI4900000000000087/D0823/CVV***
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 3    S4    04    DC3644031458720369/D${near_expiration_year}

[AB HK] Verify That Accounting Remarks For Multiple FOP - TP, CTCL VI, Invoice
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    hk
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Comment    Click Panel    Client Info
    Comment    Manually Set Value In Form Of Payment    TP    157387385187317    1232
    Comment    Verify Form Of Payment Card Is Masked On Client Info
    Comment    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Select Form Of Payment On Fare Quote Tab    Fare 1    BTA TP CARD/TP***********4198/D0825/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Set Fuel Surcharge Field    15.49379
    Populate Fare Quote Tabs with Default Values
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Invoice
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select Form Of Payment On Fare Quote Tab    Fare 2    BTA CTCL VI/VI************7710/D0823
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Set Fuel Surcharge Field    30.6
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Select Form Of Payment On Fare Quote Tab    Fare 3    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Set Fuel Surcharge Field    41
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - TP, CTCL VI, Invoice
    Execute Simultaneous Change Handling    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - TP, CTCL VI, Invoice
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    BTA TP CARD/TP120298264454198/D0825    HK    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    BTA CTCL VI/VI4484886032737710/D0823    HK    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S4    04    Invoice    HK
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 1    S2    02    BTA TP CARD/TP120298264454198/D0825
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 2    S3    03    BTA CTCL VI/VI4484886032737710/D0823
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 3    S4    04    Invoice
    [Teardown]

[AB HK] Verify That Accounting Remarks For Multiple FOP - Retain FOP - TP, CTCL VI, Invoice
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    hk
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Set Transaction Fee On Air Fare Panel    0
    Verify Fuel Surcharge Value In Air Fare    Fare 1    15
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA TP CARD/TP***********4198/D0825/CVV***
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    BTA TP CARD/TP***********4198/D0825/CVV***    Airline
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    31
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CTCL VI/VI************7710/D0823
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    BTA CTCL VI/VI************7710/D0823    CWT
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Set Transaction Fee On Air Fare Panel    0
    Verify Fuel Surcharge Value In Air Fare    Fare 3    41
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Invoice
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - Retain FOP - TP, CTCL VI, Invoice
    Execute Simultaneous Change Handling    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - Retain FOP - TP, CTCL VI, Invoice
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    BTA TP CARD/TP120298264454198/D0825    HK    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    BTA CTCL VI/VI4484886032737710/D0823    HK    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S4    04    Invoice    HK
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 1    S2    02    BTA TP CARD/TP120298264454198/D0825
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 2    S3    03    BTA CTCL VI/VI4484886032737710/D0823
    Verify Fuel Surcharge Remark Per TST Are Correct    Fare 3    S4    04    Invoice
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB SG] Verify That Accounting Remarks For Multiple FOP - VI, AX, DC
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg    us892
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN SG 3    BEAR    MultipleFOP
    Click New Booking
    Update PNR for EN or GB
    Book Flight X Months From Now    SINMNL/ACX    SS1Y1    FXP/S2-3    4    5
    Book Flight X Months From Now    MNLLAX/ACX    SS1Y1    FXP/S4-5    4    7
    Book Flight X Months From Now    LAXHKG/ACX    SS1Y2    FXP/S6    4    12
    Click Read Booking
    Click Panel    Client Info
    Get Service Option Item Value    Apply Commission Rebate on Calculation
    Manually Set Value In Form Of Payment    VI    4111111111111111    1233
    Verify Merchant Fee Type Is Not Visible
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Fuel Surcharge Is Not Displayed    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    VI************1111/D1233
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    VI4111111111111111/D1233
    Populate Fare Quote Tabs with Default Values
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Get Main Fees On Fare Quote Tab    Fare 1
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Is Not Displayed    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TEST CARD/AX***********0009/D0822/CVV****
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX375000000000009/D0822/CVV****
    Click Mask Icon to Mask Card On Fare Quote Tab
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Set Nett Fare Field    Fare 3    0
    Verify Fuel Surcharge Is Not Displayed    Fare 3
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 3    DC    38520000023237    1232
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    DC**********3237/D1232
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2-3    0203    VI4111111111111111/D1233    SG    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S4-5    0405    TEST CARD/AX375000000000009/D0822/CVV****    SG    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S6    06    DC38520000023237/D1232    SG    CWT

[AB SG] Verify That Accounting Remarks For Multiple FOP - DC TMP, CA, Cash
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg    us892
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    DC    3644031458720369    1230
    Verify Form Of Payment Card Is Masked On Client Info    # for verification
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Fuel Surcharge Is Not Displayed    Fare 1
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    VI************1111/D1233    #Needs to be verified
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline    #Needs to be verified
    Comment    Click Mask Icon To Unmask Card On Fare Quote Tab    #Needs to be verified
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    VI4111111111111111/D1233    #Needs to be verified
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 1    DC    3644031458720369    1230
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    DC3644031458720369/D1230
    Set Transaction Fee On Air Fare Panel    0
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Is Not Displayed    Fare 2
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****    #Needs to be verified
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TEST CARD/AX***********0009/D0822/CVV****
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT    #Needs to be verified
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX375000000000009/D0822/CVV****    #Needs to be verified
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 2    CA    5105105105105100    1234
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Verify Fuel Surcharge Is Not Displayed    Fare 3
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    DC************3237/D1232    #Needs to be verified
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline    #Needs to be verified
    Comment    Click Mask Icon To Unmask Card On Fare Quote Tab    #Needs to be verified
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    DC38520000023237/D1232    #Needs to be verified
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    Cash
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - DC TMP, CA, Cash
    Execute Simultaneous Change Handling    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - DC TMP, CA, Cash
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2-3    0203    DC3644031458720369/D1230    SG    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S4-5    0405    CA5105105105105100/D1234    SG    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S6    06    Cash    SG
    [Teardown]

[AB SG] Verify That Accounting Remarks For Multiple FOP - AX, DC TMP (From Portrait), AX
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg    us892
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    VI    4111111111111111    1233
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Fuel Surcharge Is Not Displayed    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 1    AX    378282246310005    1223
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    AX378282246310005/D1223
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Is Not Displayed    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    PORTRAIT/DC************0004/D1023-DC TMP
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    PORTRAIT/DC6011000000000004/D1023-DC TMP
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Verify Fuel Surcharge Is Not Displayed    Fare 3
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Cash
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    AX***********0005/D1223
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Click Mask Icon to Mask Card On Fare Quote Tab
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)    Air Fare    Client Info
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - AX, DC TMP (From Portrait), DC TMP
    Execute Simultaneous Change Handling    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - AX, DC TMP (From Portrait), DC TMP
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2-3    0203    AX378282246310005/D1223    SG    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S4-5    0405    PORTRAIT/DC6011000000000004/D1023-DC TMP    SG    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S6    06    AX378282246310005/D1223    SG    CWT
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB IN] Verify That Accounting Remarks Using Single (VI) FOP For All Segments
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    in
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN IN 3    BEAR    NIYAK
    Click New Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    VI    4484886075896240    1231
    Verify Form Of Payment Card Is Masked On Client Info
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Update PNR for EN or GB
    Book Flight X Months From Now    BOMDEL/A9W    SS1Y1    FXP/S2    4    5
    Book Flight X Months From Now    DELDXB/A9W    SS1Y1    FXP/S3    4    15
    Click Read Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    AX    378282246310005    1233
    Verify Merchant Fee Type Is Not Visible
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Fuel Surcharge Is Not Displayed    Fare 1
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    AX378282246310005/D1233
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 1    S2
    Get Route Code Value    Fare 1
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Is Not Displayed    Fare 2
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    AX378282246310005/D1233
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    AX378282246310005/D1233
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 2    S3
    Get Route Code Value    Fare 2
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    AX378282246310005/D1233    IN    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    AX378282246310005/D1233    IN    CWT
    Verify GST Remarks Per TST Are Correct    Fare 1    S2    02    AX378282246310005/D1233
    Verify GST Remarks Per TST Are Correct    Fare 2    S3    03    AX378282246310005/D1233
    [Teardown]

[AB IN] Verify That Accounting Remarks When Changing FOP For All New Segments
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    in
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Select Form Of Payment    TEST CARD/AX***********0009/D0822/CVV****
    Delete All Segments
    Book Flight X Months From Now    DXBDEL/A9W    SS1Y1    FXP/S2    4    6
    Book Flight X Months From Now    DELDXB/A9W    SS1Y1    FXP/S3    4    12
    Book Flight X Months From Now    DELBKK/A9W    SS1Y1    FXP/S4    4    23
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Route Code Value    Fare 1
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 2    S3
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Route Code Value    Fare 2
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Set Transaction Fee    0
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 3    S4
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Route Code Value    Fare 3
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    [AB IN] Verify That Accounting Remarks When Changing FOP For All New Segments
    Execute Simultaneous Change Handling    [AB IN] Verify That Accounting Remarks When Changing FOP For All New Segments
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    TEST CARD/AX375000000000009/D0822    IN    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    TEST CARD/AX375000000000009/D0822    IN    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S4    04    TEST CARD/AX375000000000009/D0822    IN    CWT
    Verify GST Remarks Per TST Are Correct    Fare 1    S2    02    TEST CARD/AX375000000000009/D0822
    Verify GST Remarks Per TST Are Correct    Fare 2    S3    03    TEST CARD/AX375000000000009/D0822
    Verify GST Remarks Per TST Are Correct    Fare 3    S4    04    TEST CARD/AX375000000000009/D0822
    [Teardown]

[AB IN] Verify That Accounting Remarks When Changing FOP To BTA From Powerbase For All New Segments
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    in
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Read Booking
    Click Panel    Client Info
    Select Form Of Payment    BTA DC/DC**********2207/D0823/CVV***
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Route Code Value    Fare 1
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Set Nett Fare Field    Fare 2    170000
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 2    S3
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Route Code Value    Fare 2
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Set Transaction Fee    100
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 3    S4
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Route Code Value    Fare 3
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    [AB IN] Verify That Accounting Remarks When Changing FOP To BTA From Powerbase For All Segments
    Execute Simultaneous Change Handling    [AB IN] Verify That Accounting Remarks When Changing FOP To BTA From Powerbase For All Segments
    Retrieve PNR Details from Amadeus
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 1    S2    02    BTA DC/DC30569101582207/D0823    IN    CWT
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 2    S3    03    BTA DC/DC30569101582207/D0823    IN    Airline
    Verify FOP, Transaction, Merchant And Commission Rebate Remarks    Fare 3    S4    04    BTA DC/DC30569101582207/D0823    IN    Airline
    Verify GST Remarks Per TST Are Correct    Fare 1    S2    02    BTA DC/DC30569101582207/D0823
    Verify GST Remarks Per TST Are Correct    Fare 2    S3    03    BTA DC/DC30569101582207/D0823
    Verify GST Remarks Per TST Are Correct    Fare 3    S4    04    BTA DC/DC30569101582207/D0823
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB HK] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    hk
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN HK 3    BEAR    PABLO
    Click New Booking
    Click Panel    Client Info
    Select Form Of Payment    BTA CTCL VI/VI************7710/D0823
    Update PNR for EN or GB
    Book Flight X Months From Now    LAXHKG/ACX    SS1Y1    FXP/S2    4    5
    Book Flight X Months From Now    HKGCKG/AKA    SS1Y1    FXP/S3    4    15
    Book Flight X Months From Now    CKGLAX/ACA    SS1Y1    FXP/S4-5    4    25
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Set Nett Fare Field    Fare 1    0
    Set Mark-Up Amount Field    0
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    BTA CTCL VI/VI************7710/D0823
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Set Nett Fare Field    Fare 2    3600
    Set Mark-Up Amount Field    0
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TEST CARD/AX***********0009/D0822/CVV****
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Set Nett Fare Field    Fare 3    0
    Set Mark-Up Amount Field    12
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    BTA CARD/CA************1114/D0828/CVV****
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4-5
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2    BTA CTCL VI/VI4484886032737710/D0823    HK    CWT
    Verify FOP Remark Per TST Is Written    Fare 2    S3    TEST CARD/AX375000000000009/D0822/CVV****    HK    Airline
    Verify FOP Remark Per TST Is Written    Fare 3    S4-5    BTA CARD/CA2222420000001114/D0828/CVV****    HK    Airline

[AB HK] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    hk
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Verify Form Of Payment Card Selected Is Displayed On Client Info    BTA CTCL VI/VI************7710/D0823
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CTCL VI/VI************7710/D0823
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Set Nett Fare Field    Fare 1    25000
    Set Mark-Up Amount Field    12
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Click Fare Tab    Fare 2
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    TEST CARD/AX***********0009/D0822/CVV****    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Mark-Up Amount Field    0
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CARD/CA************1114/D0828/CVV****
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    BTA CARD/CA************1114/D0828/CVV****    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Set Nett Fare Field    Fare 3    0
    Set Mark-Up Amount Field    0
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4-5
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase
    Execute Simultaneous Change Handling    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2    BTA CTCL VI/VI4484886032737710/D0823    HK
    Verify FOP Remark Per TST Is Written    Fare 2    S3    TEST CARD/AX375000000000009/D0822/CVV****    HK    Airline
    Verify FOP Remark Per TST Is Written    Fare 3    S4-5    BTA CARD/CA2222420000001114/D0828/CVV****    HK    Airline
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB SG] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN SG 3    BEAR    MONT
    Click New Booking
    Update PNR for EN or GB
    Book Flight X Months From Now    SINMNL/ACX    SS1Y1    FXP/S2-3    4
    Book Flight X Months From Now    MNLLAX/ACX    SS1Y1    FXP/S4-5    4    10
    Book Flight X Months From Now    LAXHKG/ACX    SS1Y1    FXP/S6    4    20
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    PORTRAIT/VI************0002/D1223-VISA
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Set Nett Fare Field    Fare 1    0
    Set Mark-Up Amount Field    10
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    PORTRAIT/AX***********0002/D1225-AMEX
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 2
    Set Nett Fare Field    Fare 2    2450
    Set Mark-Up Amount Field    15
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    PORTRAIT/CA************2124/D1221-CA
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2-3    PORTRAIT/VI4000000000000002/D1223-VISA    SG    Airline
    Verify FOP Remark Per TST Is Written    Fare 2    S4-5    PORTRAIT/AX370000000000002/D1225-AMEX    SG    CWT
    Verify FOP Remark Per TST Is Written    Fare 3    S6    PORTRAIT/CA5121212121212124/D1221-CA    SG    Airline

[AB SG] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Select Form Of Payment    PORTRAIT/AX***********0002/D1225-AMEX
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    PORTRAIT/VI************0002/D1223-VISA    CWT
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 1
    Set Nett Fare Field    Fare 1    2700
    Set Mark-Up Amount Field    0
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    PORTRAIT/AX***********0002/D1225-AMEX    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Nett Fare Field    Fare 2    2500
    Set Mark-Up Amount Field    27
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    PORTRAIT/CA************2124/D1221-CA    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 3
    Set Nett Fare Field    Fare 3    0
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait
    Execute Simultaneous Change Handling    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2-3    PORTRAIT/VI4000000000000002/D1223-VISA    SG    CWT
    Verify FOP Remark Per TST Is Written    Fare 2    S4-5    PORTRAIT/AX370000000000002/D1225-AMEX    SG    Airline
    Verify FOP Remark Per TST Is Written    Fare 3    S6    PORTRAIT/CA5121212121212124/D1221-CA    SG    CWT
    [Teardown]

[NB SG] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are TMP DC, TP And CTCL VI From Portrait
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    APAC SYN CORP ¦ APAC SYN SG 3    BEAR    MONT
    Click New Booking
    Click Panel    Client Info
    Select Form Of Payment    PORTRAIT/DC************0004/D1023-DC TMP
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Update PNR for EN or GB
    Book Flight X Months From Now    LAXSIN/ACX    SS1Y3    FXP/S2-3    4    5
    Book Flight X Months From Now    SINHKG/ACX    SS1Y1    FXP/S4    4    14
    Book Flight X Months From Now    LAXHKG/ACX    SS1Y1    FXP/S5    4    16
    Update PNR for EN or GB
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    PORTRAIT/DC************0004/D1023-DC TMP
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Set Nett Fare Field    Fare 1    0
    Set Mark-Up Amount Field    0
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    PORTRAIT/TP************0004/D1223-UATP
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    PORTRAIT/VI************0002/D1223-CTCL VISA
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S5
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2-3    PORTRAIT/DC6011000000000004/D1023-DC-TMP    SG    Airline
    Verify FOP Remark Per TST Is Written    Fare 2    S4    PORTRAIT/TP************0004/D1223-UATP    SG    CWT
    Verify FOP Remark Per TST Is Written    Fare 3    S5    PORTRAIT/VI4000000000000002/D1223-CTCL VISA    SG    Airline

[AB SG] Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are TMP DC, TP And CTCL VI From Portrait
    [Tags]    us592    us852    us853    us854    us855    us293
    ...    team_c    sg
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    PORTRAIT/DC************0004/D1023-DC TMP    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 1
    Set Nett Fare Field    Fare 1    500
    Set Mark-Up Amount Field    11
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    PORTRAIT/TP************0004/D1223-UATP    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Nett Fare Field    Fare 2    2615
    Set Mark-Up Amount Field    0
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    PORTRAIT/VI************0002/D1223-CTCL VISA    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 3
    Set Nett Fare Field    Fare 3    0
    Set Mark-Up Amount Field    52
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S5
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are DC, TMP DC And CTCL VI From Portrait
    Execute Simultaneous Change Handling    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are DC, TMP DC And CTCL VI From Portrait
    Retrieve PNR Details from Amadeus    command=RTY
    Verify FOP Remark Per TST Is Written    Fare 1    S2-3    PORTRAIT/DC************0004/D1023-DC TMP    SG    CWT
    Verify FOP Remark Per TST Is Written    Fare 2    S4    PORTRAIT/TP************0004/D1223-UATP    SG    Airline
    Verify FOP Remark Per TST Is Written    Fare 3    S5    PORTRAIT/VI4000000000000002/D1223-CTCL VISA    SG    CWT
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB HK] Verify That When a SubUnit-Carrier Combination Has BDCODE, FE/FP Lines Are Update With BDCODE
    [Tags]    us1070    hk    howan
    Open Power Express And Retrieve Profile    ${version}    Test    u001mkr    en-GB    mruizapac    APAC QA
    ...    Amadeus
    Select GDS    Amadeus
    Set Client And Traveler    XYZ Company PV2 ¦ AUTOMATION HK - US1070    BEAR    HKTENSEVENTY
    Click New Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Update PNR for EN or GB
    Book Flight X Months From Now    HKGCDG/ACX    SS1Y1    FXP/S2    5    10
    Book Flight X Months From Now    HKGLAX/AHX    SS1Y1    FXP/S3    5    20
    Book Flight X Months From Now    HANPEK/AKA    SS1Y1    FXP/S4-5    5    30
    Book Flight X Months From Now    PNHPEK/AKA    SS1Y1    FXP/S6-7    6    10
    Book Flight X Months From Now    HKGSIN/ASQ    SS1Y1    FXP/S8    6    15
    Add FE Line Manually    T5 THIS IS A TEST/I REPEAT THIS IS A TEST/THIS IS FOR TESTING A FUNCTIONALITY THANKS/THIS IS A TEST/TESTABCDEFGHIJABCDEFGHI    S6-7
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Cash
    Click Fare Tab    Fare 2
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    Invoice
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    VI************4305/D1223    CWT
    Click Fare Tab    Fare 4
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 4    VI************4305/D1223    Airline
    Click Fare Tab    Fare 5
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 5    VI************4305/D1223    Airline
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR
    Retrieve PNR Details From Amadeus    ${current_pnr}
    Verify FP Line Is Written In The PNR Per TST    Fare 1    S2    \    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 2    S3    \    Q BCODE128404
    Verify FP Line Is Written In The PNR Per TST    Fare 3    S4-5    CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 4    S6-7    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 5    S8    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*T1    S2
    Verify FE Line Is Not Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ    S3
    Verify FE Line Is Not Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ    S4-5
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ T5 THIS IS A TEST/I REPEAT THIS IS A
    Verify FE Line Is Written In The PNR Per TST    TEST/THIS IS FOR TESTING A FUNCTIONALITY THANKS/THIS IS A
    Verify FE Line Is Written In The PNR Per TST    TEST/TESTABCDE    S6-7
    Verify FE Line Is Not Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ    S8

[AB HK] Verify that When a SubUnit-Carrier Combination Has BDCODE, FE/FP Lines Are Update With BDCODE
    [Tags]    us1070    hk    howan
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    VI************4305/D1223    Airline
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    VI************4305/D1223    Airline
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    VI************4305/D1223    Airline
    Click Fare Tab    Fare 4
    Select Form Of Payment Value On Fare Quote Tab    Fare 4    Cash
    Click Fare Tab    Fare 5
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 5    VI************4305/D1223    CWT
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR
    Execute Simultaneous Change Handling    Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE, FE/FP Lines Are Update With BDCODE For HK
    Retrieve PNR Details From Amadeus    ${current_pnr}
    Verify FP Line Is Written In The PNR Per TST    Fare 1    S2    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 2    S3    CASH+CCVI4988438843884305/1223    Q BCODE128404
    Verify FP Line Is Written In The PNR Per TST    Fare 3    S4-5    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 4    S6-7    \    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    Fare 5    S8    CCVI4988438843884305/1223
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ T1    S2
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*Q BCODE128404 Q/SUBJ TO REF CHRG HKD1600 -BG:HX    S3
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ    S4-5
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*T5 THIS IS A TEST/I REPEAT THIS IS A TEST/THIS IS
    Verify FE Line Is Written In The PNR Per TST    FOR TESTING A FUNCTIONALITY THANKS/THIS IS A
    Verify FE Line Is Written In The PNR Per TST    TEST/TESTABCDE    S6-7
    Verify FE Line Is Not Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ    S8

[AB HK] Verify that When a SubUnit-Carrier Combination Has BDCODE and a Single Air Segment Changed its FOP, FE/FP Lines Are Update With BDCODE
    [Tags]    us1070    hk    howan    valid_fail
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Enter GDS Command    XE3-8
    Book Flight X Months From Now    HANPEK/AKA    SS1Y1    \    5    30
    Book Flight X Months From Now    HKGLAX/AHX    SS1Y1    FXP/S5    6    10
    Book Flight X Months From Now    PVGHKG/AKA    SS1Y1    FXP/S3-4,6    6    20
    Add FE Line Manually    THIS IS A TEST/I REPEAT THIS IS A TEST/THIS IS FOR TESTING A FUNCTIONALITY THANKS/THIS IS A TEST/TESTABCDEFGHIJABCDEFGHIJAB    S3-4,6
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Cash
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    VI************4305/D1223    Airline
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    Cash
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR
    Execute Simultaneous Change Handling    Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE and a Single Air Segment Changed its FOP, FE/FP Lines Are Update With BDCODE For HK
    Retrieve PNR Details From Amadeus    ${current_pnr}
    Verify FP Line Is Written In The PNR Per TST    1    S2    \    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    2    S3-4,6    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FP Line Is Written In The PNR Per TST    3    S5    \    Q BCODE128404
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*T1    S2
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ THIS IS A TEST/I REPEAT THIS IS A
    Verify FE Line Is Written In The PNR Per TST    TEST/THIS IS FOR TESTING A FUNCTIONALITY THANKS/THIS IS A
    Verify FE Line Is Written In The PNR Per TST    TEST/TESTABCDEFGH    S3-4,6
    Verify FE Line Is Not Written In The PNR Per TST    FE PAX *M*Q BCODE128404 T1    S5
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Enter GDS Command    XE2-6
    Book Flight X Months From Now    PVGHKG/AKA    SS1Y1    FXP/S2    5    10
    Add FE Line Manually    T1
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    VI************4305/D1223    Airline
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR
    Execute Simultaneous Change Handling    Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE and a Single Air Segment Changed its FOP, FE/FP Lines Are Update With BDCODE 2 For HK
    Retrieve PNR Details From Amadeus    ${current_pnr}
    Verify FP Line Is Written In The PNR Per TST    Fare 1    S2    CASH+CCVI4988438843884305/1223    BCODEHK1GEYXZ
    Verify FE Line Is Written In The PNR Per TST    FE PAX *M*BCODEHK1GEYXZ T1    S2
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

[NB HK] Verify That BCODE Remarks Is Written
    [Tags]    team_c    hk    us1121    us1276
    Open Power Express And Retrieve Profile    ${version}    Test    u003axo    en-GB    aobsum    APAC QA
    ...    Amadeus
    Set Client And Traveler    XYZ Company PV2 ¦ AUTOMATION HK - US1070    BEAR    HKTENSEVENTY
    Click New Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Update PNR for EN or GB
    Book Flight X Months From Now    LAXHKG/ADL    SS1Y1    FXP/S2-3    3    7
    Book Flight X Months From Now    HKGCKG/AKA    SS1Y1    FXP/S4    3    13
    Book Flight X Months From Now    CKGHKG/ACX    SS1Y1    FXP/S5    3    25
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    VI************4305/D1223
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    VI4988438843884305/D1223
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 1
    Verify Fuel Surcharge Value In Air Fare    Fare 1    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    VI************4305/D1223
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    VI4988438843884305/D1223
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Get Fare Including Airline Taxes Value    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    Cash
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Get FE Line Remarks
    Click Finish PNR
    Retrieve PNR Details from Amadeus
    Verify BCODE and FP PAX In The PNR Remarks    Fare 1    S2-3    DL    VI4988438843884305/1223    CWT
    Verify BCODE and FP PAX In The PNR Remarks    Fare 2    S4    HX    CASH+VI4988438843884305/1223    Airline
    Verify BCODE and FP PAX In The PNR Remarks    Fare 3    S5    CX    Cash

[AB HK] Verify That BCODE Remarks Is Written
    [Tags]    team_c    hk    us1121
    [Setup]
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    TP    157387385187317    1232
    Verify Form Of Payment Card Is Masked On Client Info
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Book Flight X Months From Now    HKGLAX/ACX    SS1Y1    FXP/S2    3
    Book Flight X Months From Now    HKGMNL/APR    SS1Y1    FXP/S7    4    5
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Set Fuel Surcharge Field    15.49379
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TP***********7317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    TP***********7317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Populate Fare Quote Tabs with Default Values
    Get Fare Including Airline Taxes Value    Fare 3
    Click Fare Tab    Fare 4
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Cash
    Select Form Of Payment On Fare Quote Tab    Fare 4    Cash
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Verify Merchant Fee Fields Are Disabled    Fare 4
    Verify Fuel Surcharge Value In Air Fare    Fare 4    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 5
    Select Form Of Payment Value On Fare Quote Tab    Fare 5    TP***********7317/D1232
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TP157387385187317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 5    Airline
    Verify Fuel Surcharge Value In Air Fare    Fare 5    30
    Populate Fare Quote Tabs with Default Values
    Get Fare Including Airline Taxes Value    Fare 5
    Populate All Panels (Except Given Panels If Any)
    Get FE Line Remarks
    Click Finish PNR    Amend Booking For Verify That BCODE Remarks Is Written
    Execute Simultaneous Change Handling    Amend Booking For Verify That BCODE Remarks Is Written
    Retrieve PNR Details from Amadeus
    Verify BCODE and FP PAX In The PNR Remarks    Fare 1    S2    CX    Invoice
    Verify BCODE and FP PAX In The PNR Remarks    Fare 2    S3-4    DL    TP157387385187317/1232    CWT
    Verify BCODE and FP PAX In The PNR Remarks    Fare 3    S5    KA    CASH+TP157387385187317/1232    Airline
    Verify BCODE and FP PAX In The PNR Remarks    Fare 4    S6    CX    Cash
    Verify BCODE and FP PAX In The PNR Remarks    Fare 5    S7    PR    CASH+TP157387385187317/1232    Airline
    [Teardown]    Cancel PNR Thru GDS Native    ${current_pnr}

*** Keywords ***
Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - TP, CTCL VI, Invoice
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    TP    157387385187317    1232
    Verify Form Of Payment Card Is Masked On Client Info
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Select Form Of Payment On Fare Quote Tab    Fare 1    BTA TP CARD/TP***********4198/D0825/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Set Fuel Surcharge Field    15.49379
    Populate Fare Quote Tabs with Default Values
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/VI************0087/D0823/CVV***
    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select Form Of Payment On Fare Quote Tab    Fare 2    BTA CTCL VI/VI************7710/D0823
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Set Fuel Surcharge Field    30.6
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Select Form Of Payment On Fare Quote Tab    Fare 3    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Set Fuel Surcharge Field    41
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - TP, CTCL VI, Invoice

Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - Retain FOP - TP, CTCL VI, Invoice
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Set Transaction Fee On Air Fare Panel    0
    Verify Fuel Surcharge Value In Air Fare    Fare 1    15
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA TP CARD/TP***********4198/D0825/CVV***
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    BTA TP CARD/TP***********4198/D0825/CVV***    Airline
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    31
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CTCL VI/VI************7710/D0823
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    BTA CTCL VI/VI************7710/D0823    CWT
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Set Transaction Fee On Air Fare Panel    0
    Verify Fuel Surcharge Value In Air Fare    Fare 3    41
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Invoice
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Set Fuel Surcharge Field    30
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - Retain FOP - TP, CTCL VI, Invoice

Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - DC TMP, CA, Cash
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    DC    3644031458720369    1230
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 1    DC    3644031458720369    1230
    Set Transaction Fee On Air Fare Panel    0
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 2    CA    5105105105105100    1234
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    Cash
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - DC TMP, CA, Cash

Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - AX, DC TMP (From Portrait), DC TMP
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    VI    4111111111111111    1233
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Fuel Surcharge Is Not Displayed    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Manually Set Form Of Payment - Card Details On Fare Quote Tab    Fare 1    AX    378282246310005    1223
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    AX378282246310005/D1223
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Verify Fuel Surcharge Is Not Displayed    Fare 2
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    PORTRAIT/DC************0004/D1023-DC TMP
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    PORTRAIT/DC6011000000000004/D1023-DC TMP
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Verify Fuel Surcharge Is Not Displayed    Fare 3
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Cash
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    AX***********0005/D1223
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify FOP Credit Card Is UnMasked On Fare Quote Tab
    Click Mask Icon to Mask Card On Fare Quote Tab
    Verify FOP Credit Card Is Masked On Fare Quote Tab
    Verify FOP Merchant Field Is Mandatory And Blank On Fare Quote Tab
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Populate All Panels (Except Given Panels If Any)    Air Fare    Client Info
    Click Finish PNR    Amend Booking For Verify That FOP Selection, Remarks And Functions Are Covered For Multiple FOP - AX, DC TMP (From Portrait), DC TMP

Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Verify Form Of Payment Card Selected Is Displayed On Client Info    BTA CTCL VI/VI************7710/D0823
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CTCL VI/VI************7710/D0823
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    CWT
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Set Nett Fare Field    Fare 1    25000
    Set Mark-Up Amount Field    12
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2
    Click Fare Tab    Fare 2
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TEST CARD/AX***********0009/D0822/CVV****
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    TEST CARD/AX***********0009/D0822/CVV****    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Mark-Up Amount Field    0
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S3
    Click Fare Tab    Fare 3
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA CARD/CA************1114/D0828/CVV****
    Comment    Verify FOP Merchant Selected Is Displayed On Fare Quote Tab    Airline
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    BTA CARD/CA************1114/D0828/CVV****    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Set Nett Fare Field    Fare 3    0
    Set Mark-Up Amount Field    0
    Populate Fare Quote Tabs with Default Values
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S4-5
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote tabs Are Written When FOP Used Are VI, AX And CA From Powerbase

Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Select Form Of Payment    PORTRAIT/AX***********0002/D1225-AMEX
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Comment    Verify Form Of Payment Field Is Mandatory And Blank On Fare Quote Tab
    Comment    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    PORTRAIT/VI************0002/D1223-VISA    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 1
    Set Nett Fare Field    Fare 1    2700
    Set Mark-Up Amount Field    0
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    PORTRAIT/AX***********0002/D1225-AMEX    Airline
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Nett Fare Field    Fare 2    2500
    Set Mark-Up Amount Field    27
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4-5
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    PORTRAIT/CA************2124/D1221-CA    CWT
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 3
    Set Nett Fare Field    Fare 3    0
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S6
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are VI, AX And CA From Portrait

Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are DC, TMP DC And CTCL VI From Portrait
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)    Air Fare
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    PORTRAIT/DC************0004/D1023-DC TMP    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 1
    Set Nett Fare Field    Fare 1    500
    Set Mark-Up Amount Field    11
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Base Fare, Total Taxes And LFCC    Fare 1    S2-3
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    PORTRAIT/DC************0004/D1223-DC    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 2
    Set Nett Fare Field    Fare 2    2615
    Set Mark-Up Amount Field    0
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Base Fare, Total Taxes And LFCC    Fare 2    S4
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    PORTRAIT/VI************0002/D1223-CTCL VISA    CWT
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Set Nett Fare Field    Fare 3    0
    Set Mark-Up Amount Field    52
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Base Fare, Total Taxes And LFCC    Fare 3    S5
    Click Finish PNR    Amend Booking For Verify FOP Lines And Accounting Remarks For Multiple Fare Quote Tabs Are Written When FOP Used Are DC, TMP DC And CTCL VI From Portrait

Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE, FE/FP Lines Are Update With BDCODE For HK
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    VI************4305/D1223    Airline
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    VI************4305/D1223    Airline
    Click Fare Tab    Fare 3
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 3    VI************4305/D1223    Airline
    Click Fare Tab    Fare 4
    Select Form Of Payment Value On Fare Quote Tab    Fare 4    Cash
    Click Fare Tab    Fare 5
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 5    VI************4305/D1223    CWT
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR

Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE and a Single Air Segment Changed its FOP, FE/FP Lines Are Update With BDCODE For HK
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Enter GDS Command    XE3-8
    Book Flight X Months From Now    HANPEK/AKA    SS1Y1    \    5    30
    Book Flight X Months From Now    HKGLAX/AHX    SS1Y1    FXP/S5    6    10
    Book Flight X Months From Now    PVGHKG/AKA    SS1Y1    FXP/S3-4,6    6    20
    Add FE Line Manually    THIS IS A TEST/I REPEAT THIS IS A TEST/THIS IS FOR TESTING A FUNCTIONALITY THANKS/THIS IS A TEST/TESTABCDEFGHIJABCDEFGHIJAB    S3-4,6
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Cash
    Click Fare Tab    Fare 2
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 2    VI************4305/D1223    Airline
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    Cash
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR

Amend Booking For Verify that When a SubUnit-Carrier Combination Has BDCODE and a Single Air Segment Changed its FOP, FE/FP Lines Are Update With BDCODE 2 For HK
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Manually Set Value In Form Of Payment    VI    4988438843884305    1223
    Enter GDS Command    XE2-6
    Book Flight X Months From Now    PVGHKG/AKA    SS1Y1    FXP/S2    5    10
    Add FE Line Manually    T1
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment And Merchant On Fare Quote Tab    Fare 1    VI************4305/D1223    Airline
    Click Read Booking
    Populate All Panels (Except Given Panels If Any)
    Click Panel    Delivery
    Set Ticketing Date One Day Ahead
    Click Finish PNR

Add FE Line Manually
    [Arguments]    ${fe_line}    ${segment}=${EMPTY}
    Run Keyword If    '${segment}' != '${EMPTY}'    Enter GDS Command    FE ${fe_line}/${segment}
    ...    ELSE    Enter GDS Command    FE ${fe_line}

Get Line Number of FE Line
    [Arguments]    ${fe_line}
    ${remark_line}    Get Lines Matching Regexp    ${pnr_details}    ${fe_line}
    ${remark_line_count}    Get Line Count    ${remark_line}
    ${fe_line_number}    Get Substring    ${remark_line}    0    3
    ${fe_line_number}    Remove String Using Regexp    ${line_no}    [^\\d]
    [Return]    ${fe_line_number}

[AB IN] Verify That Accounting Remarks When Changing FOP For All New Segments
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Select Form Of Payment    TEST CARD/AX***********0009/D0822/CVV****
    Delete All Segments
    Book Flight X Months From Now    DXBDEL/AAI    SS1Y1    FXP/S2    6    6
    Book Flight X Months From Now    DELORD/AAI    SS1Y1    FXP/S3    6    12
    Book Flight X Months From Now    ORDDEL/AAI    SS1Y1    FXP/S4    6    23
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 1    Airline
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Route Code Value    Fare 1
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 2    S3
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Route Code Value    Fare 2
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 3    CWT
    Set Transaction Fee    0
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 3    S4
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Route Code Value    Fare 3
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    [AB IN] Verify That Accounting Remarks When Changing FOP For All New Segments

[AB IN] Verify That Accounting Remarks When Changing FOP To BTA From Powerbase For All Segments
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Select Form Of Payment    BTA DC/DC**********2207/D0823/CVV***
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 1    CWT
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 1    S2
    Get Main Fees On Fare Quote Tab    Fare 1
    Get Route Code Value    Fare 1
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Set Nett Fare Field    Fare 2    170000
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 2    S3
    Get Main Fees On Fare Quote Tab    Fare 2
    Get Route Code Value    Fare 2
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    BTA DC/DC**********2207/D0823/CVV***
    Select FOP Merchant On Fare Quote Tab    Fare 3    Airline
    Set Transaction Fee    100
    Get Base Fare, Total Taxes, YQ Tax And LFCC From TST    Fare 3    S4
    Get Main Fees On Fare Quote Tab    Fare 3
    Get Route Code Value    Fare 3
    Populate Fare Quote Tabs with Default Values
    Populate All Panels (Except Given Panels If Any)
    Click Finish PNR    [AB IN] Verify That Accounting Remarks When Changing FOP To BTA From Powerbase For All Segments

Amend Booking For Verify That BCODE Remarks Is Written
    Retrieve PNR    ${current_pnr}
    Click Amend Booking
    Click Panel    Client Info
    Manually Set Value In Form Of Payment    TP    157387385187317    1232
    Verify Form Of Payment Card Is Masked On Client Info
    Verify FOP Merchant Field Is Not Visible On Client Info Panel
    Book Flight X Months From Now    HKGLAX/ACX    SS1Y1    FXP/S2    3
    Book Flight X Months From Now    HKGMNL/APR    SS1Y1    FXP/S7    4    5
    Click Read Booking
    Click Panel    Air Fare
    Click Fare Tab    Fare 1
    Select Form Of Payment Value On Fare Quote Tab    Fare 1    Invoice
    Verify Merchant Fee Fields Are Disabled    Fare 1
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Set Fuel Surcharge Field    15.49379
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 2
    Select Form Of Payment Value On Fare Quote Tab    Fare 2    TP***********7317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 2    CWT
    Verify Merchant Fee Fields Are Enabled    Fare 2
    Verify Fuel Surcharge Value In Air Fare    Fare 2    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 3
    Select Form Of Payment Value On Fare Quote Tab    Fare 3    TP***********7317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 2    Airline
    Verify Merchant Fee Fields Are Disabled    Fare 3
    Verify Fuel Surcharge Value In Air Fare    Fare 3    30
    Populate Fare Quote Tabs with Default Values
    Get Fare Including Airline Taxes Value    Fare 3
    Click Fare Tab    Fare 4
    Comment    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    Cash
    Select Form Of Payment On Fare Quote Tab    Fare 4    Cash
    Verify FOP Merchant Field Is Not Visible On Fare Quote Tab
    Verify Merchant Fee Fields Are Disabled    Fare 4
    Verify Fuel Surcharge Value In Air Fare    Fare 4    30
    Populate Fare Quote Tabs with Default Values
    Click Fare Tab    Fare 5
    Select Form Of Payment Value On Fare Quote Tab    Fare 5    TP***********7317/D1232
    Click Mask Icon To Unmask Card On Fare Quote Tab
    Verify Form Of Payment Selected Is Displayed On Fare Quote Tab    TP157387385187317/D1232
    Select FOP Merchant On Fare Quote Tab    Fare 5    Airline
    Verify Fuel Surcharge Value In Air Fare    Fare 5    30
    Populate Fare Quote Tabs with Default Values
    Get Fare Including Airline Taxes Value    Fare 5
    Populate All Panels (Except Given Panels If Any)
    Get FE Line Remarks
    Click Finish PNR    Amend Booking For Verify That BCODE Remarks Is Written
